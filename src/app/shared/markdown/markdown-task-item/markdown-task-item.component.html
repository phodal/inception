<ul *ngFor="let task of list">
  <li>
    <mat-checkbox class="complete"
                  [(ngModel)]="task.item.completed" (change)="checkValue($event, task.item)">
    </mat-checkbox>

    <span class="priority" *ngIf="task.item.priority">{{task.item.priority}} </span>
    <span class="start-date" *ngIf="task.item.startDate">
        <mat-form-field>
          <mat-icon matPrefix>calendar today</mat-icon>
          <input mwlFlatpickr
                 matInput
                 (ngModelChange)="changeStartDateInput($event, task.item)"
                 [(ngModel)]="task.item.startDate">
          </mat-form-field>
    </span>
    <span class="end-date" *ngIf="task.item.endDate">
        <mat-form-field>
          <mat-icon matPrefix>calendar today</mat-icon>
          <input mwlFlatpickr
                 matInput
                 (ngModelChange)="changeEndDateInput($event, task.item)"
                 [(ngModel)]="task.item.endDate">
          </mat-form-field>
    </span>

    <span (click)="enableEdit(task.item)" *ngIf="!task.item.editable">{{task.item.text}}</span>
    <input autofocus *ngIf="task.item.editable" type="text" [(ngModel)]="task.item.text"
           (keyup.enter)="updateText($event, task.item)">

    <span class="context" *ngIf="task.item.context"> @{{task.item.context}} </span>
    <span class="tag" *ngIf="task.item.tag">
      <span *ngFor="let tag of task.item.tag;let last = last">{{tag}}
        <ng-template *ngIf="!last">,</ng-template> </span>
    </span>

    <ul *ngIf="task.childrens">
      <component-markdown-task-item
        ngDefaultControl
        [(ngModel)]="task.childrens"
        (ngModelChange)="checkValue($event, null)">
      </component-markdown-task-item>
    </ul>
  </li>
</ul>
